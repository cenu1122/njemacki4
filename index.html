<!DOCTYPE html>
<html lang="bs">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Online Uƒçenje Jezika | Glasovni AI Chat</title>
<style>
body { font-family: Arial, sans-serif; margin:0; background:#f4f4f4; color:#333; }
header { background:#005f73; color:#fff; padding:20px 0; text-align:center; }
header h1 { margin:0; font-size:2em; }
section { padding:30px 20px; max-width:1000px; margin:auto; background:#fff; border-radius:10px; margin-bottom:20px; box-shadow:0 2px 8px rgba(0,0,0,0.1); }
h2 { color:#005f73; }
button { background:#0a9396; color:#fff; border:none; padding:10px 20px; border-radius:5px; cursor:pointer; font-weight:bold; margin-top:10px; }
button:hover { background:#94d2bd; color:#000; }
.chat-output { background:#e9f5f2; padding:15px; border-radius:10px; min-height:100px; margin-top:10px; }
</style>
</head>
<body>

<header>
<h1>Online Uƒçenje Jezika | Glasovni AI Chat</h1>
<p>Priƒçaj sa AI-jem i uƒçite engleski i njemaƒçki</p>
</header>

<section id="english">
<h2>Engleski</h2>
<p>Pritisni dugme i postavi pitanje glasom.</p>
<button onclick="startRecognition('english')">üé§ Postavi pitanje</button>
<div id="english-output" class="chat-output"></div>
</section>

<section id="german">
<h2>Njemaƒçki</h2>
<p>Pritisni dugme i postavi pitanje glasom.</p>
<button onclick="startRecognition('german')">üé§ Postavi pitanje</button>
<div id="german-output" class="chat-output"></div>
</section>

<script>
// Provjera browser podr≈°ke
const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
const synth = window.speechSynthesis;

function startRecognition(lang) {
    if (!SpeechRecognition) {
        alert('Va≈° browser ne podr≈æava glasovno prepoznavanje.');
        return;
    }

    let recognition = new SpeechRecognition();
    recognition.lang = lang === 'english' ? 'en-US' : 'de-DE';
    recognition.interimResults = false;
    recognition.maxAlternatives = 1;

    recognition.start();

    recognition.onresult = function(event) {
        const speechResult = event.results[0][0].transcript;
        console.log('User said: ', speechResult);

        // Prikaz u chat boxu
        const output = document.getElementById(`${lang}-output`);
        output.innerHTML = `<b>Vi:</b> ${speechResult}<br>`;

        // Slanje na AI chat embed (ili fake primjer)
        // Za demo: generi≈°emo odgovor tekstom
        let aiResponse = `Ovo je primjer odgovora na: "${speechResult}"`;
        output.innerHTML += `<b>AI:</b> ${aiResponse}`;

        // TTS: AI odgovara glasom
        const utter = new SpeechSynthesisUtterance(aiResponse);
        utter.lang = lang === 'english' ? 'en-US' : 'de-DE';
        synth.speak(utter);
    };

    recognition.onerror = function(event) {
        console.error('Error recognition: ', event.error);
    };
}
</script>

</body>
</html>
